import{useSiteData as O,defineClientConfig as $}from"@vuepress/client";import{defineComponent as E,computed as L,h as r}from"vue";import{useLocaleConfig as x,hasGlobalComponent as y}from"vuepress-shared/client";import{useRoute as U,useRouter as W,RouterLink as p}from"vue-router";import m from"vuepress-plugin-components/client/components/FontIcon.js";import"./styles/auto-catalog.scss";var k=E({name:"AutoCatalog",props:{base:{type:String,default:""},level:{type:Number,default:3},titleGetter:{type:Function,default:l=>l.title},iconGetter:{type:Function,default:l=>l.icon},orderGetter:{type:Function,default:l=>l.order||0},shouldIndex:{type:Function,default:l=>l.index!==!1}},setup(l){const o=x(AUTO_CATALOG_LOCALES),g=U(),A=W(),v=O(),_=()=>{const i=l.base||g.path.replace(/\/[^/]+$/,"/"),h=A.getRoutes(),d=[];return h.filter(({meta:t,path:e})=>{if(!e.startsWith(i)||e===i)return!1;if(i==="/"){const n=Object.keys(v.value.locales).filter(s=>s!=="/");if(e==="/404.html"||n.some(s=>e.startsWith(s)))return!1}return(e.endsWith(".html")&&!e.endsWith("/index.html")||e.endsWith("/"))&&l.shouldIndex(t)}).map(({path:t,meta:e})=>{const n=t.substring(i.length).split("/").length;return{title:l.titleGetter(e),icon:l.iconGetter(e),base:t.replace(/\/[^/]+\/?$/,"/"),order:l.orderGetter(e),level:t.endsWith("/")?n-1:n,path:t}}).filter(({title:t,level:e})=>e<=l.level||!t).sort((t,e)=>t.level-e.level||(t.path.endsWith("/index.html")?-1:e.path.endsWith("/index.html")?1:t.order===null?e.order===null?t.title.localeCompare(e.title):e.order:e.order===null?t.order:t.order>0?e.order>0?t.order-e.order:-1:e.order<0?t.order-e.order:1)).forEach(t=>{var e;const{base:n,level:s}=t;switch(s){case 1:d.push(t);break;case 2:{const c=d.find(a=>a.path===n);c&&(c.children??(c.children=[])).push(t);break}default:{const c=d.find(a=>a.path===n.replace(/\/[^/]+\/$/,"/"));if(c){const a=(e=c.children)==null?void 0:e.find(u=>u.path===n);a&&(a.children??(a.children=[])).push(t)}}}}),d},C=L(()=>_());return()=>r("div",{class:"auto-catalog-wrapper"},[r("h2",{class:"main-title"},o.value.title),...C.value.map(({children:i=[],icon:h,path:d,title:t},e)=>[r("h3",{id:t,class:["child-title",{"has-children":i.length}]},[r("a",{href:`#${t}`,class:"header-anchor"},"#"),r(p,{class:"catalog-title",to:d},()=>[h?r(m,{icon:h}):null,`${e+1}. ${t||"Unknown"}`])]),i.length?r("ul",{class:"child-catalog-wrapper"},i.map(({children:n=[],icon:s,path:c,title:a},u)=>r("li",{class:"child-catalog-item"},[r("div",{class:["sub-title",{"has-children":n.length}]},[r("a",{href:`#${a}`,class:"header-anchor"},"#"),r(p,{class:"catalog-title",to:c},()=>[s?r(m,{icon:s}):null,`${e+1}.${u+1} ${a||"Unknown"}`])]),n.length?r("div",{class:"sub-catalog-wrapper"},n.map(({icon:f,path:T,title:G},b)=>r(p,{class:"sub-catalog-item",to:T},()=>[f?r(m,{icon:f}):null,`${e+1}.${u+1}.${b+1} ${G||"Unknown"}`]))):null]))):null])])}}),w=$({enhance:({app:l})=>{y("AutoCatalog",l)||l.component("AutoCatalog",()=>r(k,{titleGetter:o=>o[AUTO_CATALOG_TITLE_META_KEY],iconGetter:o=>o[AUTO_CATALOG_ICON_META_KEY],orderGetter:o=>o[AUTO_CATALOG_ORDER_META_KEY],shouldIndex:o=>Boolean(o[AUTO_CATALOG_INDEX_META_KEY])}))}});export{w as default};
//# sourceMappingURL=config.js.map
